无论是硬盘、内存还是cpu，读取数据都是按块读取，读取一个数据会顺便读取它相邻的数据。硬盘读硬盘块，内存读内存页，cpu读缓存行

cpu以缓存行读取数据(按块读取思想)，intel缓存行容量64，两个核同时读取缓存行，一个修改数据会立即通知另一个核需要刷新缓存行最新的数据，这就是缓存一致性协议(MESI)。如果两个核同时修改同一个缓存行不同的数据，就会发生伪共享

OS程序安装在硬盘第一块扇区上，开机时，硬件程序是写死到硬盘第一个块扇区引导OS启动的

OS启动完所有硬件操作权就归OS关了

《Linux内核设计与实现》

内核是OS管理硬件的程序

宏内核与微内核（鸿蒙OS物联网）

#### 用户态与内核态

cpu 不同级别的指令

Linux内核跑在ring0级，用户程序跑在ring3级

内核有200多个函数来进行系统调用：read、write....

#### 进程 线程 纤程 中断

进程是OS分配资源的基本单位，最重要的资源是内存空间

线程是OS执行调度的基本单位，线程共享进程的内存空间，没有自己独立的内存空间

JVM里的线程和OS的线程是一一对应的，JVM起一个线程，OS就会起一个对应的线程，是重量级线程，在内核空间，起不了多少个

纤程是用户空间级的线程，线程中的线程，可以起很多个，JVM自己管理和切换，不需经过OS

纤程优势：
1.占有资源少 OS起线程要用1M，线程只要4k
2.纤程切换简单
3.可以启动很多个（10w+）

纤程应用场景：很短的计算任务，不需要和内核打交道，并发量高

#### cpu如何区分一个立即数 和 一条指令？

cpu和内存之间有三条总线相连：数据总线、地址总线、控制总线，从哪条总线过来的cpu就认为是啥

**看到12**