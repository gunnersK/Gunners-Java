## 进程实体

数据段

代码段

PCB（进程控制块） -- OS为每个进程分配一个，描述进程的各种信息，如程序代码存放的位置







## 进程定义

进程是一个动态的概念，比较传统典型的定义有：

- 是程序的一次 **执行过程**
- 是程序及其数据在CPU上顺序执行时所 **发生的活动**
- 是程序在数据集合上 **运行的过程**，是资源分配和调度的独立单位

进程是进程实体的 **运行过程**

进程实体是静态的，进程是动态的







## 进程控制

OS把进程指针按照的进程不同状态放入不同的队列

就绪队列/工作队列 -- CPU分时执行就绪队列中的进程

阻塞队列/等待队列 -- 根据不同的阻塞事件分为多个阻塞队列



#### 阻塞和唤醒

阻塞时，CPU会保护现场，把当前进程的上下文保存在PCB中，并把PCB中的标志位从运行态改为阻塞态，放进相应事件的等待队列中

唤醒时，在事件等待队列中找到PCB，将标志位从阻塞态改为就绪态，从等待队列移除，插入就绪队列

阻塞和唤醒要成对出现，因为什么事件阻塞，就会因为什么事件唤醒







## 进程调度

计时部件向CPU发送中断信号，告诉CPU当前时间片已用完

让OS介入，将CPU使用权交给OS

OS就处理中断信号

OS发现中断信号是时间片已用完的信号，就切换下一个线程执行

这就实现了CPU执行多个线程



#### 调度时机

- 程序主动放弃CPU

  进程自然终止

  程序异常

  主动申请中断阻塞（比如IO等待）

- 程序被动放弃CPU

  CPU时间片用完

  中断信号产生
  
  更高优先级的进程进入就绪队列
  
  







## 进程通信

- 共享空间 -- 通过共享空间来访问其他进程的空间，访问共享空间互斥，写的时候不能读

- 管道通信 -- 在内存中开辟的缓冲区，大小一般和内存页面一样（在Linux中就是4k）

  管道只能实现半双工通信，即一个时间段内只能单向传输，全双工需要两个管道，管道访问也互斥

  管道写满了才能读，读空了才能写

  只能有一个进程从管道读数据

- 消息传递







## 线程

#### 进程的弊端

传统的进程是程序执行流的最小单位，一个进程只能串行执行程序

并发调度时需要切换进程的运行环境，开销过大

所以引入线程，增加并发度



#### 线程的作用

线程可以理解为轻量级进程，是CPU调度的基本单位，是程序执行流的最小单位

每个进程包含多个线程，CPU通过调度算法轮流服务线程

线程切换不需要切换进程环境，开销变小





 12.进程和线程的关系和区别 

 13.进程和线程共享了资源,线程也自己独有一些资源,那么具体哪些资源是共享的,哪些资源 

 是线程独有的 