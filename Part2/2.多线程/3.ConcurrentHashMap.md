## 原理

1.8之前，把数组分为好几段，分段加锁，多线程操作的元素在同一数组段时会串行操作，粒度较大

#### 1.8开始

数组重新变为一个，减小锁的粒度

多线程put时，当对应位置数组元素为null时，按数组元素的粒度进行CAS操作

不为null时代表发生hash冲突，则进行Synchronized串行操作，挂链表或红黑树



**多线程扩容了解下**