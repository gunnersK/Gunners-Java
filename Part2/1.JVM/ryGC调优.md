#### 堆内存大小

xmn -- 新生代大小

xms -- 最小堆内存

xmx -- 最大堆内存

一般xms和xmx设置一样大



#### 永久代大小

一般设置几百M

溢出情况：



#### 栈内存大小

一般设置0.5-1M

溢出情况：



#### 预估内存压力

学会合理预估内存压力，选择合适的机器配置

根据一个业务场景，预估高峰期有多少对象、一个对象多大、会存活多久

再将这个场景扩展开来，将内存占用扩大10-20倍

拆分新生代老年代大小，确定机器内存

**画出业务流程图**再分析

上线系统时，要先预估系统的JVM内存、CPU负载、网络带宽、磁盘带宽/空间、关联数据库和中间件的压力



#### 内存过小带来的问题

在请求高峰时，会快速生成很多对象，新生代占用急剧增加

由于压力骤增，导致系统性能下降，会有一部分请求要花费很长时间才处理完，生成一些长期存活对象

这时如果再往新生代分配对象，就会触发Minor GC，但是那些长期存活对象还在

然后新生代很快被填满，再次触发Minor GC，多次之后，那些对象就会被转移到老年代

之后慢请求处理完，在老年代中的对象就成了垃圾，而且老年代被占满的频率很快

频繁重复这个过程，就会频繁触发老年代GC

老年代GC速度很慢，极大影响系统性能



分析业务请求压力

查看机器内存大小分配

GC情况