设计模式是一整套的思想，不同的场景合理的运用可以提升整体架构质量

简单的需求逻辑就不要去硬凑设计模式，否则会引起过度设计，要可上可下



## 设计原则

#### 开闭原则

##### 定义

对扩展开放，对修改关闭

当应用的需求改变时，在不修改软件实体的源代码或者二进制代码的前提下，可以扩展模块的功能，满足新需求。

##### 实现方法

抽象约束、封装变化。即通过**接口**或者**抽象类**为软件实体定义一个相对**稳定**的抽象层，而将相同的可变因素封装在相同的具体实现类中



#### 里氏替换

##### 概括  

子类引用一定可以替换父类引用，父类引用不一定可以替换子类引用，由这条原则引出四条实现规则

##### 定义

子类可以扩展父类功能，但不能改变父类原有的功能。所有引用父类的地方必须能透明、正常地使用其子类对象

##### 规则

- 子类可以实现父类的抽象方法，但不要覆盖父类非抽象方法

  > 在类中调用其他类时务必要使用父类引用或者接口，否则说明类的设计已经违背原则。

- 当子类覆盖父类的方法，方法参数类型要比父类方法宽松或相等，方法返回值要比父类严格或相等
- 子类可以派生自己的方法

- 若程序必须违背里氏替换原则，则需取消继承关系，重新设计

  > 例如：鸵鸟不能定义为鸟的子类，因为它不会飞



#### 依赖倒置

面向接口编程，高层低层不应该相互依赖，两者应该依赖其抽象层



#### 单一职责

##### 定义

一个类应该有且仅有一个引起它变化的原因，否则类应该被拆分

应该控制类的粒度大小、将对象解耦、提高其内聚性

##### 优点

- 降低类的复杂度。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。
- 提高类的可读性。复杂性降低，自然其可读性会提高。
- 提高系统的可维护性。可读性提高，那自然更容易维护了。
- 变更引起的风险降低。变更是必然的，如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响。



#### 接口隔离

##### 定义

一个类对另一个类的依赖应该建立在最小的接口上

要为各个类建立它们需要的专用接口，而不要去建立一个很庞大的接口供所有依赖它的类去调用

约束接口、降低类对接口的依赖性

##### 规则

- 一个接口只服务于一个子模块或业务逻辑
- 根据业务逻辑和模块确定要以何种维度来定义拆分接口方法
- 接口只提供调用者需要的方法，屏蔽不需要的方法

##### 接口隔离原则和单一职责的区别

- 单一职责注重类的职责，而接口隔离注重的是类对接口依赖的隔离。
- 单一职责主要是约束类，针对的是程序中的实现和细节；接口隔离主要约束接口，主要针对抽象和程序整体框架的构建。



#### 合成复用

##### 定义

在软件复用时，优先考虑组合或者聚合关系，其次才考虑继承关系

如果要使用**继承**关系，则必须严格遵循**里氏替换**原则，两者相辅相成，都是开闭原则的具体实现规范