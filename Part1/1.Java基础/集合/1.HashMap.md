hash算法、寻址算法的优化

如何解决hash冲突

扩容、rehash过程，rehash算法优化

 

## hash算法

```java
// jdk源码
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

#### 计算hash

把hashCode二进制右移（>>>）16位，再与原来的hashCode进行异或运算

> 异或运算：相同得0，相反得1



#### 寻址算法

把hash值跟数组长度 - 1再进行与运算（&），即：(n -1) & hash，这样性能更高 

直接取模性能差



位移运算符：

```<<``` 乘2

```>>``` 除2

```>>>```无符号右移，空位0补齐