- mmap：用户内核态共享空间，调用内核的mmap系统调用

  共享空间可视为进程私有空间的一部分，用红黑树保存数据

- epoll是一种系统调用：同步非阻塞多路复用
- Windows有AIO，Linux没有AIO
- 发送本地文件的过程（两次拷贝）
  - 第一次：磁盘文件加载到内核，对应fd3，调用内核read函数将文件读到应用程序中
  - 第二次：应用程序调用write函数将文件写回去内核，内核再通过网卡对应的fd4发送文件

- 零拷贝



#### Redis二进制安全

外面客户端啥编码，Redis不知道，客户端要把value转成字节数组给Redis，Redis是二进制安全的，只保存二进制，不管编码，所以客户端使用Redis时一定要约定好编解码规则

- Redis单线程的意义

  Redis单线程保证原子操作，数据一致性，线程安全

  若Redis多线程操作，就得用锁去保证上述问题

- MySQL更倾向使用BIO，一个请求一个线程，更需要更多的线程

  如果进来很多个请求，每个请求都触发磁盘IO，磁盘IO带宽会打满，阻塞住。这时看起来好像很多请求进来了，但都得阻塞住，故这里用Epoll意义不大，直接用BIO

- Redis快且并发高的原因之一：

  Redis会有核心亲密度的概念，将Redis亲密到某个core上，即Redis进程只跑在一个core上，不用别的core跑，即让其他进程用别的core，不用Redis的这个core跑，不切换时间片，也使这个core的三级缓存不用频繁清理

- bitmap用途

  统计任意时间区间内用户的登录情况，用户id做key，bit代表每年每天

  统计日活跃用户数，日期做key，用户id做bit

  bitmap操作统计日活的命令复习下（bittop、bitcount）  03-7



#### 阻塞列表

BLPOP，可实现阻塞队列，获取不到元素就一直阻塞着直到有元素